#!/usr/bin/env zsh

# First, setup some directories I want
mkdir -p $HOME/personal
mkdir -p $HOME/src
mkdir -p $HOME/.config/powerline


# Install OSX packages
if [[ `uname` == 'Darwin' ]]; then
  echo "Installing Homebrew"
  ruby -e "$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)"
fi

# install powerline and fonts
pip install powerline-status thefuck
pushd $HOME/personal
git clone git@github.com:powerline/fonts.git
cd fonts && ./install.sh
popd


# install RVM because ruby <3
if [[ `which rvm` == '' ]]; then
  echo "Installing RVM"
  curl -sSL https://get.rvm.io | bash -s stable
else
  echo "RVM already installed"
fi

# Install Vundler to manage Vim bundles
if [[ ! -d ~/.vim/bundle/vundle ]]; then
  echo "Installing vundle"
  git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle
fi

# Symlink my vimrc
ln -s $HOME/personal/dotfiles/.vimrc $HOME/.vimrc

# Install bundles managed by Vundler
vim +PluginInstall +qall

# Install oh-my-zsh
curl -L http://install.ohmyz.sh | sh

# Install TEM to manage AWS accounts
curl -L https://raw.github.com/tapjoy/tem/master/em.sh > ~/.em.sh

# Symlink my zshrc
ln -s $HOME/personal/dotfiles/.zshrc ~/.zshrc

# Symlink tmux config
ln -s $HOME/personal/dotfiles/.tmux.conf ~/.tmux.conf

# Symlink gitconfig
ln -s $HOME/personal/dotfiles/.gitconfig ~/.gitconfig
