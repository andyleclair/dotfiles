#!/usr/bin/env bash
# shebang'd to bash because zsh ain't come standard

set -e

# First, setup some directories I want
mkdir -p $HOME/personal
mkdir -p $HOME/src
mkdir -p $HOME/.config/powerline
touch $HOME/personal/dotfiles/.credentials

if [[ `uname` == Darwin* ]]; then
  echo "Installing is unsupported on this architecture"
  exit 1
fi

# Install base dependencies for everything
bash -l ./packages/base

# Next, install ASDF to manage, like, so many packages
zsh -l ./packages/asdf
zsh -l ./packages/asdf_langs

# Now do pip stuff because everyone loves python
zsh -l ./packages/pip_things

# Install neovim + plugins
zsh -l ./packages/neovim

# Install TEM to manage AWS accounts
curl -L https://raw.github.com/tapjoy/tem/master/em.sh > ~/.em.sh

# Install TPM
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

# Install patched fonts for glyphs
zsh -l ./packages/fonts

# Symlink tmux config
ln -s $HOME/personal/dotfiles/.tmux.conf ~/.tmux.conf

# Symlink gitconfig
ln -s $HOME/personal/dotfiles/.gitconfig ~/.gitconfig

echo "Installed! Now set your font to Hack Regular to get glyphs"
